<!-- GENERAL AVERAGE RATING -->
<div class="gen-rating">
  <div class="row">
    <div id="rate-msg">This movie made other users feel...</div>
  </div>

  <div class="row" id="happy">
    <button class="adj">Happy</button>
    <button class="grid-btn happy"></button>
    <button class="grid-btn happy"></button>
    <button class="grid-btn happy"></button>
    <button class="grid-btn happy"></button>
    <button class="grid-btn happy"></button>
    <button class="grid-btn happy"></button>
    <button class="grid-btn happy"></button>
    <button class="grid-btn happy"></button>
    <button class="grid-btn happy"></button>
    <button class="grid-btn happy"></button>
  </div>

  <div class="row" id="angry">
    <button class="adj">Angry</button>
    <button class="grid-btn angry"></button>
    <button class="grid-btn angry"></button>
    <button class="grid-btn angry"></button>
    <button class="grid-btn angry"></button>
    <button class="grid-btn angry"></button>
    <button class="grid-btn angry"></button>
    <button class="grid-btn angry"></button>
    <button class="grid-btn angry"></button>
    <button class="grid-btn angry"></button>
    <button class="grid-btn angry"></button>
  </div>

  <div class="row" id="smart">
    <button class="adj">Smart</button>
    <button class="grid-btn smart"></button>
    <button class="grid-btn smart"></button>
    <button class="grid-btn smart"></button>
    <button class="grid-btn smart"></button>
    <button class="grid-btn smart"></button>
    <button class="grid-btn smart"></button>
    <button class="grid-btn smart"></button>
    <button class="grid-btn smart"></button>
    <button class="grid-btn smart"></button>
    <button class="grid-btn smart"></button>
  </div>

  <div class="row" id="excited">
    <button class="adj">Excited</button>
    <button class="grid-btn excited"></button>
    <button class="grid-btn excited"></button>
    <button class="grid-btn excited"></button>
    <button class="grid-btn excited"></button>
    <button class="grid-btn excited"></button>
    <button class="grid-btn excited"></button>
    <button class="grid-btn excited"></button>
    <button class="grid-btn excited"></button>
    <button class="grid-btn excited"></button>
    <button class="grid-btn excited"></button>
  </div>

  <div class="row" id="relaxed">
    <button class="adj">Relaxed</button>
    <button class="grid-btn relaxed"></button>
    <button class="grid-btn relaxed"></button>
    <button class="grid-btn relaxed"></button>
    <button class="grid-btn relaxed"></button>
    <button class="grid-btn relaxed"></button>
    <button class="grid-btn relaxed"></button>
    <button class="grid-btn relaxed"></button>
    <button class="grid-btn relaxed"></button>
    <button class="grid-btn relaxed"></button>
    <button class="grid-btn relaxed"></button>
  </div>

  <div class="row" id="shocked">
    <button class="adj">Shocked</button>
    <button class="grid-btn shocked"></button>
    <button class="grid-btn shocked"></button>
    <button class="grid-btn shocked"></button>
    <button class="grid-btn shocked"></button>
    <button class="grid-btn shocked"></button>
    <button class="grid-btn shocked"></button>
    <button class="grid-btn shocked"></button>
    <button class="grid-btn shocked"></button>
    <button class="grid-btn shocked"></button>
    <button class="grid-btn shocked"></button>
  </div>

  <div class="row" id="scared">
    <button class="adj">Scared</button>
    <button class="grid-btn scared"></button>
    <button class="grid-btn scared"></button>
    <button class="grid-btn scared"></button>
    <button class="grid-btn scared"></button>
    <button class="grid-btn scared"></button>
    <button class="grid-btn scared"></button>
    <button class="grid-btn scared"></button>
    <button class="grid-btn scared"></button>
    <button class="grid-btn scared"></button>
    <button class="grid-btn scared"></button>
  </div>

  <div class="row" id="sad">
    <button class="adj">Sad</button>
    <button class="grid-btn sad"></button>
    <button class="grid-btn sad"></button>
    <button class="grid-btn sad"></button>
    <button class="grid-btn sad"></button>
    <button class="grid-btn sad"></button>
    <button class="grid-btn sad"></button>
    <button class="grid-btn sad"></button>
    <button class="grid-btn sad"></button>
    <button class="grid-btn sad"></button>
    <button class="grid-btn sad"></button>
  </div>

  <div class="row" id="hungry">
    <button class="adj">Hungry</button>
    <button class="grid-btn hungry"></button>
    <button class="grid-btn hungry"></button>
    <button class="grid-btn hungry"></button>
    <button class="grid-btn hungry"></button>
    <button class="grid-btn hungry"></button>
    <button class="grid-btn hungry"></button>
    <button class="grid-btn hungry"></button>
    <button class="grid-btn hungry"></button>
    <button class="grid-btn hungry"></button>
    <button class="grid-btn hungry"></button>
  </div>

  <div class="row" id="bored">
    <button class="adj">Bored</button>
    <button class="grid-btn bored"></button>
    <button class="grid-btn bored"></button>
    <button class="grid-btn bored"></button>
    <button class="grid-btn bored"></button>
    <button class="grid-btn bored"></button>
    <button class="grid-btn bored"></button>
    <button class="grid-btn bored"></button>
    <button class="grid-btn bored"></button>
    <button class="grid-btn bored"></button>
    <button class="grid-btn bored"></button>
  </div>

  <div class="row">
    <button class="adj rate" id="rateit">Rate it!</button>
    <div class="explain">No fields are mandatory<br/> Rate what you want!</div>
  </div>
  
</div>

<!-- USER RATING -->
<div class="user-rating">
  <div class="row">
    <div id="rate-msg">This movie made me feel...</div>
  </div>

  <div class="row" id="happy">
    <button class="adj">Happy</button>
    <button id="pnk-minus" class="minus-ctrl" data-toggle="tooltip" data-placement="top"></button>
    <button class="grid-btn pnk"></button>
    <button class="grid-btn pnk"></button>
    <button class="grid-btn pnk"></button>
    <button class="grid-btn pnk"></button>
    <button class="grid-btn pnk"></button>
    <button class="grid-btn pnk"></button>
    <button class="grid-btn pnk"></button>
    <button class="grid-btn pnk"></button>
    <button class="grid-btn pnk"></button>
    <button class="grid-btn pnk"></button>
    <button id="pnk-plus" class="plus-ctrl" data-toggle="tooltip" data-placement="top"></button>
  </div>

  <div class="row" id="angry">
    <button class="adj">Angry</button>
    <button id="rd-minus" class="minus-ctrl" data-toggle="tooltip" data-placement="top"></button>
    <button class="grid-btn rd"></button>
    <button class="grid-btn rd"></button>
    <button class="grid-btn rd"></button>
    <button class="grid-btn rd"></button>
    <button class="grid-btn rd"></button>
    <button class="grid-btn rd"></button>
    <button class="grid-btn rd"></button>
    <button class="grid-btn rd"></button>
    <button class="grid-btn rd"></button>
    <button class="grid-btn rd"></button>
    <button id="rd-plus" class="plus-ctrl" data-toggle="tooltip" data-placement="top"></button>
  </div>

  <div class="row" id="smart">
    <button class="adj">Smart</button>
    <button id="ora-minus" class="minus-ctrl" data-toggle="tooltip" data-placement="top"></button>
    <button class="grid-btn ora"></button>
    <button class="grid-btn ora"></button>
    <button class="grid-btn ora"></button>
    <button class="grid-btn ora"></button>
    <button class="grid-btn ora"></button>
    <button class="grid-btn ora"></button>
    <button class="grid-btn ora"></button>
    <button class="grid-btn ora"></button>
    <button class="grid-btn ora"></button>
    <button class="grid-btn ora"></button>
    <button id="ora-plus" class="plus-ctrl" data-toggle="tooltip" data-placement="top"></button>
  </div>

  <div class="row" id="excited">
    <button class="adj">Excited</button>
    <button id="yel-minus" class="minus-ctrl" data-toggle="tooltip" data-placement="top"></button>
    <button class="grid-btn yel"></button>
    <button class="grid-btn yel"></button>
    <button class="grid-btn yel"></button>
    <button class="grid-btn yel"></button>
    <button class="grid-btn yel"></button>
    <button class="grid-btn yel"></button>
    <button class="grid-btn yel"></button>
    <button class="grid-btn yel"></button>
    <button class="grid-btn yel"></button>
    <button class="grid-btn yel"></button>
    <button id="yel-plus" class="plus-ctrl" data-toggle="tooltip" data-placement="top"></button>
  </div>

  <div class="row" id="relaxed">
    <button class="adj">Relaxed</button>
    <button id="whi-minus" class="minus-ctrl" data-toggle="tooltip" data-placement="top"></button>
    <button class="grid-btn whi"></button>
    <button class="grid-btn whi"></button>
    <button class="grid-btn whi"></button>
    <button class="grid-btn whi"></button>
    <button class="grid-btn whi"></button>
    <button class="grid-btn whi"></button>
    <button class="grid-btn whi"></button>
    <button class="grid-btn whi"></button>
    <button class="grid-btn whi"></button>
    <button class="grid-btn whi"></button>
    <button id="whi-plus" class="plus-ctrl" data-toggle="tooltip" data-placement="top"></button>
  </div>

  <div class="row" id="shocked">
    <button class="adj">Shocked</button>
    <button id="pur-minus" class="minus-ctrl" data-toggle="tooltip" data-placement="top"></button>
    <button class="grid-btn pur"></button>
    <button class="grid-btn pur"></button>
    <button class="grid-btn pur"></button>
    <button class="grid-btn pur"></button>
    <button class="grid-btn pur"></button>
    <button class="grid-btn pur"></button>
    <button class="grid-btn pur"></button>
    <button class="grid-btn pur"></button>
    <button class="grid-btn pur"></button>
    <button class="grid-btn pur"></button>
    <button id="pur-plus" class="plus-ctrl" data-toggle="tooltip" data-placement="top"></button>
  </div>

  <div class="row" id="scared">
    <button class="adj">Scared</button>
    <button id="lil-minus" class="minus-ctrl" data-toggle="tooltip" data-placement="top"></button>
    <button class="grid-btn lil"></button>
    <button class="grid-btn lil"></button>
    <button class="grid-btn lil"></button>
    <button class="grid-btn lil"></button>
    <button class="grid-btn lil"></button>
    <button class="grid-btn lil"></button>
    <button class="grid-btn lil"></button>
    <button class="grid-btn lil"></button>
    <button class="grid-btn lil"></button>
    <button class="grid-btn lil"></button>
    <button id="lil-plus" class="plus-ctrl" data-toggle="tooltip" data-placement="top"></button>
  </div>

  <div class="row" id="sad">
    <button class="adj">Sad</button>
    <button id="blu-minus" class="minus-ctrl" data-toggle="tooltip" data-placement="top"></button>
    <button class="grid-btn blu"></button>
    <button class="grid-btn blu"></button>
    <button class="grid-btn blu"></button>
    <button class="grid-btn blu"></button>
    <button class="grid-btn blu"></button>
    <button class="grid-btn blu"></button>
    <button class="grid-btn blu"></button>
    <button class="grid-btn blu"></button>
    <button class="grid-btn blu"></button>
    <button class="grid-btn blu"></button>
    <button id="blu-plus" class="plus-ctrl" data-toggle="tooltip" data-placement="top"></button>
  </div>

  <div class="row" id="hungry">
    <button class="adj">Hungry</button>
    <button id="grn-minus" class="minus-ctrl" data-toggle="tooltip" data-placement="top"></button>
    <button class="grid-btn grn"></button>
    <button class="grid-btn grn"></button>
    <button class="grid-btn grn"></button>
    <button class="grid-btn grn"></button>
    <button class="grid-btn grn"></button>
    <button class="grid-btn grn"></button>
    <button class="grid-btn grn"></button>
    <button class="grid-btn grn"></button>
    <button class="grid-btn grn"></button>
    <button class="grid-btn grn"></button>
    <button id="grn-plus" class="plus-ctrl" data-toggle="tooltip" data-placement="top"></button>
  </div>

  <div class="row" id="bored">
    <button class="adj">Bored</button>
    <button id="brn-minus" class="minus-ctrl" data-toggle="tooltip" data-placement="top"></button>
    <button class="grid-btn brn"></button>
    <button class="grid-btn brn"></button>
    <button class="grid-btn brn"></button>
    <button class="grid-btn brn"></button>
    <button class="grid-btn brn"></button>
    <button class="grid-btn brn"></button>
    <button class="grid-btn brn"></button>
    <button class="grid-btn brn"></button>
    <button class="grid-btn brn"></button>
    <button class="grid-btn brn"></button>
    <button id="brn-plus" class="plus-ctrl" data-toggle="tooltip" data-placement="top"></button>
  </div>

  <div class="row">
    <button class="adj rate" id="rate-submit">Rate!</button>
  </div>
</div>


<script>
$(document).ready(function() {


  //AVG RATING DISPLAY
  var base_url="http://localhost/COMP307/";
  var url = base_url+'back-end/avgrating';
  var movieid = $('#movieid').text();
  var postdata = 'movieid='+movieid;
  $.ajax({
    type: "POST",
    url: url,
    data: postdata,
    dataType: 'json',
    success: function(data){
      var colormap = {happy:"pink", angry:"red", smart:"orange", excited:"yellow", relaxed:"white", shocked:"purple", scared:"lilac", sad:"blue", hungry:"green", bored:"brown"};
      var adjarray = $('.gen-rating > div').map(function(){
        return this.id;
      }).get();
      for (var grididx=1; grididx < 11; grididx++){
        var adj = adjarray[grididx];
        var query = eval("data[0]." + adj);
        for (var i=0; i<query; i++){
          $('.'+adj).eq(i).addClass(colormap[adj]);
        }
      }
    }
   });

  //QUESTION MARK HOVER EXPLANATION
  $('#rateit').hover(function(){
    $('.explain').show();
    }, function(){
      $('.explain').hide();
  });

  $('#rateit').click(function(){
    $('.gen-rating').hide();
    $('.user-rating').show();
  });

//USER GRID//
  //PINK - HAPPY
  var ipink = 0;
  var interval = null;
  $('#pnk-plus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#pnk-plus").val($("#pnk-plus").val() + 200);
        if(ipink < 10){
          $('.pnk').eq(ipink).addClass('pink');
          ipink++;
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });
  $('#pnk-minus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#pnk-minus").val($("#pnk-minus").val() + 200);
        if(ipink > 0){
          ipink--;
          $('.pnk').eq(ipink).removeClass('pink');
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });

  //RED - ANGRY
  var ird = 0;
  var interval = null;
  $('#rd-plus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#rd-plus").val($("#rd-plus").val() + 200);
        if(ird < 10){
          $('.rd').eq(ird).addClass('red');
          ird++;
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });
  $('#rd-minus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#rd-minus").val($("#rd-minus").val() + 200);
        if(ird > 0){
          ird--;
          $('.rd').eq(ird).removeClass('red');
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });

  //ORANGE - SMART
  var iora = 0;
  var interval = null;
  $('#ora-plus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#ora-plus").val($("#ora-plus").val() + 200);
        if(iora < 10){
          $('.ora').eq(iora).addClass('orange');
          iora++;
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });
  $('#ora-minus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#ora-minus").val($("#ora-minus").val() + 200);
        if(iora > 0){
          iora--;
          $('.ora').eq(iora).removeClass('orange');
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });

  //YELLOW - EXCITED
  var iyel = 0;
  var interval = null;
  $('#yel-plus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#yel-plus").val($("#yel-plus").val() + 200);
        if(iyel < 10){
          $('.yel').eq(iyel).addClass('yellow');
          iyel++;
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });
  $('#yel-minus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#yel-minus").val($("#yel-minus").val() + 200);
        if(iyel > 0){
          iyel--;
          $('.yel').eq(iyel).removeClass('yellow');
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });

  //WHITE - RELAXED
  var iwhi = 0;
  var interval = null;
  $('#whi-plus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#whi-plus").val($("#whi-plus").val() + 200);
        if(iwhi < 10){
          $('.whi').eq(iwhi).addClass('white');
          iwhi++;
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });
  $('#whi-minus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#whi-minus").val($("#whi-minus").val() + 200);
        if(iwhi > 0){
          iwhi--;
          $('.whi').eq(iwhi).removeClass('white');
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });

  //PURPLE - SHOCKED
  var ipur = 0;
  var interval = null;
  $('#pur-plus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#pur-plus").val($("#pur-plus").val() + 200);
        if(ipur < 10){
          $('.pur').eq(ipur).addClass('purple');
          ipur++;
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });
  $('#pur-minus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#pur-minus").val($("#pur-minus").val() + 200);
        if(ipur > 0){
          ipur--;
          $('.pur').eq(ipur).removeClass('purple');
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });

  //LILAC - SCARED
  var ilil = 0;
  $('#lil-plus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#lil-plus").val($("#lil-plus").val() + 200);
        if(ilil < 10){
          $('.lil').eq(ilil).addClass('lilac');
          ilil++;
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });
  $('#lil-minus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#lil-minus").val($("#lil-minus").val() + 200);
        if(ilil > 0){
          ilil--;
          $('.lil').eq(ilil).removeClass('lilac');
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });

  //BLUE - SAD
  var iblu = 0;
  $('#blu-plus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#blu-plus").val($("#blu-plus").val() + 200);
        if(iblu < 10){
          $('.blu').eq(iblu).addClass('blue');
          iblu++;
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });
  $('#blu-minus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#blu-minus").val($("#blu-minus").val() + 200);
        if(iblu > 0){
          iblu--;
          $('.blu').eq(iblu).removeClass('blue');
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });

  //GREEN - HUNGRY
  var igrn = 0;
  $('#grn-plus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#grn-plus").val($("#grn-plus").val() + 200);
        if(igrn < 10){
          $('.grn').eq(igrn).addClass('green');
          igrn++;
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });
  $('#grn-minus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#grn-minus").val($("#grn-minus").val() + 200);
        if(igrn > 0){
          igrn--;
          $('.grn').eq(igrn).removeClass('green');
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });

  //BROWN - BORED
  var ibrn = 0;
  $('#brn-plus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#brn-plus").val($("#brn-plus").val() + 200);
        if(ibrn < 10){
          $('.brn').eq(ibrn).addClass('brown');
          ibrn++;
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });
  $('#brn-minus').on('mousedown', function() {
    interval = setInterval(function() {
        $("#brn-minus").val($("#brn-minus").val() + 200);
        if(ibrn > 0){
          ibrn--;
          $('.brn').eq(ibrn).removeClass('brown');
        }
      }, 200);
  }).on('mouseup mouseleave', function() {
    clearInterval(interval);
  });

// RATINGS SUBMIT
  $('#rate-submit').click(function(){
    $('.user-rating').hide();
    $('.gen-rating').show();
  });
  
});

</script>